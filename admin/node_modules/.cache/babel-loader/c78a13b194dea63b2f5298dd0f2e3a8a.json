{"remainingRequest":"/Users/hanajanderova/Public/arualcms/admin/node_modules/babel-loader/lib/index.js!/Users/hanajanderova/Public/arualcms/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hanajanderova/Public/arualcms/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hanajanderova/Public/arualcms/admin/src/components/Sign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hanajanderova/Public/arualcms/admin/src/components/Sign.vue","mtime":1614368990812},{"path":"/Users/hanajanderova/Public/arualcms/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanajanderova/Public/arualcms/admin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/hanajanderova/Public/arualcms/admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hanajanderova/Public/arualcms/admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTaWduJywKICBjb21wb25lbnRzOiB7fSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVzc2FnZTogbnVsbCwKICAgICAgbWVzc2FnZUNsYXNzOiBudWxsLAogICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIHVzZXJuYW1lTmV3VXNlcjogbnVsbCwKICAgICAgcGFzc3dvcmROZXdVc2VyOiBudWxsLAogICAgICBwYXNzd29yZENoZWNrTmV3VXNlcjogbnVsbCwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIGxvZ2dlZFVzZXI6IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHBhc3N3b3JkQ2hlY2tOZXdVc2VyOiBmdW5jdGlvbiBwYXNzd29yZENoZWNrTmV3VXNlcih2YWwpIHsKICAgICAgaWYgKHZhbCAhPT0gdGhpcy5wYXNzd29yZE5ld1VzZXIpIHsKICAgICAgICB0aGlzLmVycm9yID0gIlBhc3N3b3JkIG1pc21hdGNoISI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHRoaXMuJG1vZGFsLnNob3coJ3NpZ24nKTsKICAgIH0sCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB0aGlzLiRtb2RhbC5oaWRlKCdzaWduJyk7CiAgICB9LAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDo5MDAwL2FwaS92MS91c2VyL2xvZ2luIiwgewogICAgICAgICJ1c2VybmFtZSI6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgInBhc3N3b3JkIjogdGhpcy5wYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIF90aGlzLm1lc3NhZ2UgPSByZXMubWVzc2FnZTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5tZXNzYWdlID0gcmVzLm1lc3NhZ2U7CiAgICAgICAgICBfdGhpcy5tZXNzYWdlQ2xhc3MgPSAiYWxlcnQgYWxlcnQtc3VjY2VzcyI7CiAgICAgICAgICBfdGhpcy51c2VybmFtZSA9IG51bGw7CiAgICAgICAgICBfdGhpcy5wYXNzd29yZCA9IG51bGw7CiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXJJZCcsIHJlcy5pZCk7CiAgICAgICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6OTAwMC9hcGkvdjEvdXNlcj9pZD0iICsgcmVzLmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpcy5sb2dnZWRVc2VyID0gcmVzcG9uc2UuZGF0YS51c2VybmFtZTsKICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VyIiwgcmVzcG9uc2UuZGF0YS51c2VybmFtZSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpcy5oaWRlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLm1lc3NhZ2UgPSByZXMubWVzc2FnZTsKICAgICAgICAgIF90aGlzLm1lc3NhZ2VDbGFzcyA9ICJhbGVydCBhbGVydC1kYW5nZXIiOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlcklkIik7CiAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidXNlciIpOwogICAgICB0aGlzLmxvZ2dlZFVzZXIgPSBudWxsOwogICAgfSwKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5wb3N0KCJodHRwOi8vbG9jYWxob3N0OjkwMDAvYXBpL3YxL3VzZXIvcmVnaXN0ZXIiLCB7CiAgICAgICAgInVzZXJuYW1lIjogdGhpcy51c2VybmFtZU5ld1VzZXIsCiAgICAgICAgInBhc3N3b3JkIjogdGhpcy5wYXNzd29yZE5ld1VzZXIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpczIubWVzc2FnZSA9IHJlcy5tZXNzYWdlOwogICAgICAgICAgX3RoaXMyLm1lc3NhZ2VDbGFzcyA9ICJhbGVydCBhbGVydC1zdWNjZXNzIjsKICAgICAgICAgIF90aGlzMi51c2VybmFtZU5ld1VzZXIgPSBudWxsOwogICAgICAgICAgX3RoaXMyLnBhc3N3b3JkTmV3VXNlciA9IG51bGw7CiAgICAgICAgICBfdGhpczIucGFzc3dvcmRDaGVja05ld1VzZXIgPSBudWxsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIubWVzc2FnZSA9IHJlcy5tZXNzYWdlOwogICAgICAgICAgX3RoaXMyLm1lc3NhZ2VDbGFzcyA9ICJhbGVydCBhbGVydC1kYW5nZXIiOwogICAgICAgICAgX3RoaXMyLnVzZXJuYW1lTmV3VXNlciA9IG51bGw7CiAgICAgICAgICBfdGhpczIucGFzc3dvcmROZXdVc2VyID0gbnVsbDsKICAgICAgICAgIF90aGlzMi5wYXNzd29yZENoZWNrTmV3VXNlciA9IG51bGw7CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczIubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Sign.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"sign\">\n    <button v-if=\"!loggedUser\" @click=\"show\" class=\"btn btn-outline-success\" type=\"submit\">Sign In / Sign Up</button>\n    <table v-if=\"loggedUser\">\n      <tr>\n        <td>{{ loggedUser }}</td>\n        <td><button v-if=\"loggedUser\" @click=\"logout\" class=\"btn btn-outline-danger\" type=\"submit\">Sign out</button></td>\n      </tr>\n    </table>\n    <modal name=\"sign\" :width=\"600\" :height=\"530\" :adaptive=\"true\">\n      <div class=\"modal-dialog\">\n        <!-- Modal content-->\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h3 class=\"modal-title\">Sign in / Register</h3>\n            <button @click=\"hide\" type=\"button\" class=\"close\" data-dismiss=\"modal\">Ã—</button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"row\">\n              <div class=\"col-12\">\n                <div v-if=\"message\" v-bind:class=\"messageClass\">{{ message }}</div>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col-6 borderRight\">\n                <label for=\"username\">Username</label>\n                <input type=\"text\" v-model=\"username\" class=\"form-control\" id=\"username\">\n                <label for=\"username\">Password</label>\n                <input type=\"password\" v-model=\"password\" class=\"form-control\" id=\"password\">\n                <button class=\"float-right btn btn-success mt-3\" v-on:click=\"login\">Sign In</button>\n              </div>\n              <div class=\"col-6\">\n                <p class=\"mb-3\">For using database storing create your account.</p>\n                <label for=\"usernameNewUser\">Email</label>\n                <input type=\"email\" v-model=\"usernameNewUser\" class=\"form-control\" id=\"usernameNewUser\" required>\n                <label for=\"passwordNewUser\">Password</label>\n                <input type=\"password\" v-model=\"passwordNewUser\" class=\"form-control\" id=\"passwordNewUser\" required>\n                <label for=\"passwordCheckNewUser\">Password for check </label>\n                <input type=\"password\" v-model=\"passwordCheckNewUser\" class=\"form-control\" id=\"passwordCheckNewUser\"\n                       required>\n                <div v-if=\"error\" class=\"mt-1 alert alert-danger\">{{ error }}</div>\n                <button :disabled=\"this.passwordNewUser !== this.passwordCheckNewUser\"\n                        class=\"float-right btn btn-success mt-3\" v-on:click=\"register\">Sign Up\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </modal>\n  </div>\n</template>\n\n<script>\n\nimport axios from \"axios\";\n\nexport default {\n  name: 'Sign',\n  components: {},\n  data() {\n    return {\n      message: null,\n      messageClass: null,\n      username: null,\n      password: null,\n      usernameNewUser: null,\n      passwordNewUser: null,\n      passwordCheckNewUser: null,\n      error: null,\n      loggedUser: window.localStorage.getItem(\"user\")\n    }\n  },\n  watch: {\n    passwordCheckNewUser: function (val) {\n      if (val !== this.passwordNewUser) {\n        this.error = \"Password mismatch!\";\n      } else {\n        this.error = null;\n      }\n    },\n  },\n  methods: {\n    show() {\n      this.$modal.show('sign')\n    },\n    hide() {\n      this.$modal.hide('sign')\n    },\n    login() {\n      axios.post(\"http://localhost:9000/api/v1/user/login\", {\"username\": this.username, \"password\": this.password})\n          .then(response => {\n            let res = response.data;\n            this.message = res.message;\n            if (res.success) {\n              this.message = res.message;\n              this.messageClass = \"alert alert-success\";\n              this.username = null;\n              this.password = null;\n              window.localStorage.setItem('userId', res.id);\n              axios.get(\"http://localhost:9000/api/v1/user?id=\"+res.id)\n                  .then(response => {\n                      this.loggedUser = response.data.username;\n                    window.localStorage.setItem(\"user\", response.data.username)\n                  });\n              this.hide();\n            } else {\n              this.message = res.message;\n              this.messageClass = \"alert alert-danger\";\n            }\n          });\n    },\n    logout() {\n      window.localStorage.removeItem(\"userId\");\n      window.localStorage.removeItem(\"user\");\n      this.loggedUser = null;\n    },\n    register() {\n      axios.post(\n          \"http://localhost:9000/api/v1/user/register\",\n          {\"username\": this.usernameNewUser, \"password\": this.passwordNewUser}\n          ).then(response => {\n            let res = response.data;\n            if (res.success) {\n              this.message = res.message;\n              this.messageClass = \"alert alert-success\";\n              this.usernameNewUser = null;\n              this.passwordNewUser = null;\n              this.passwordCheckNewUser = null;\n            } else {\n              this.message = res.message;\n              this.messageClass = \"alert alert-danger\";\n              this.usernameNewUser = null;\n              this.passwordNewUser = null;\n              this.passwordCheckNewUser = null;\n            }\n        console.log(this.message);\n          });\n    }\n  }\n}\n</script>\n<style lang=\"css\" scoped>\n\n.borderRight {\n  border-right: 1px solid silver;\n}\n\n.modal-content {\n  border: none !important;\n}\n\n.modal-header {\n  border: none !important;\n}\n\n</style>\n"],"sourceRoot":"src/components"}]}